<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript"
	src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="script/jquery/jquery-1.8.1.min.js"></script>
<script type="text/javascript"
	src="script/jquery/jquery.ui.map.full.min.js"></script>
</head>
<body>
	<div>Maps example for GolfTracker</div>
	<div id="map_canvas" style="width: 600px;height:600px;"></div>

	<script type="text/javascript"> 
	
		$('#map_canvas').gmap({
			'center' : '58.435646, 11.380046'
		});
		$('#map_canvas').gmap().bind('init', function(event, map) { 
			$(map).click( function(event) {
				$('#map_canvas').gmap('addMarker', {
					'position': event.latLng, 
					'draggable': true, 
					'bounds': false
				}, function(map, marker) {
					$('#dialog').append('<form id="dialog'+marker.__gm_id+'" method="get" action="/" style="display:none;"><p><label for="country">Country</label><input id="country'+marker.__gm_id+'" class="txt" name="country" value=""/></p><p><label for="state">State</label><input id="state'+marker.__gm_id+'" class="txt" name="state" value=""/></p><p><label for="address">Address</label><input id="address'+marker.__gm_id+'" class="txt" name="address" value=""/></p><p><label for="comment">Comment</label><textarea id="comment" class="txt" name="comment" cols="40" rows="5"></textarea></p></form>');
					//findLocation(marker.getPosition(), marker);
					//alert('Add form');
				}).dragend( function(event) {
					//findLocation(event.latLng, this);
					alert('Dragend');
				}).click( function() {
					//openDialog(this);
					alert('Click');
				})
			});
		});
		
		function openDialog(marker) {
			$('#dialog'+marker.__gm_id).dialog({'modal':true, 'title': 'Edit and save point', 'buttons': { 
				"Remove": function() {
					$(this).dialog( "close" );
					marker.setMap(null);
				},
				"Save": function() {
					$(this).dialog( "close" );
				}
			}});
		}
		/* $('#map_canvas').gmap({
			'callback' : function(map) {
				// The keyword 'this' refers to the plugin object itself. Which means you can execute shorthand code; e.g. this.addMarker({...});  
				// do something
				alert("1");
			}
		});
		$('#map_canvas').gmap().bind('init', function(event, map) {
			alert("2");
		});

		$('#map_canvas').gmap('option', 'zoom', 15);
		
		$('#map_canvas').gmap({'callback':function() {
			alert("3");
			if ( status === 'OK' ) {
				var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
				$('#map_canvas').gmap('addMarker', {'position': clientPosition, 'bounds': true});
				$('#map_canvas').gmap('addShape', 'Circle', { 
					'strokeWeight': 0, 
					'fillColor': "#008595", 
					'fillOpacity': 0.25, 
					'center': clientPosition, 
					'radius': 15, 
					'clickable': false 
				});
			}                                                                                                                                                                                                           
	}}); */
	</script>

</body>
</html>
