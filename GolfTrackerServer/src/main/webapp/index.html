<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>GolfTracker</title>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-lightness/jquery-ui.css" type="text/css" rel="stylesheet">
	<script type="text/javascript"
		src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<!--  
	<script type="text/javascript" src="script/jquery/jquery-1.8.1.min.js"></script>
	<script type="text/javascript" src="script/jquery/jquery.ui.min.js"></script>
	-->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/jquery-ui.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="script/jquery/jquery.ui.map.full.min.js"></script>
	 <script type="text/javascript" src="/rest-js"></script>
</head>
<body>
	<div>Maps example for GolfTracker</div>
	<div id="map_canvas" style="width: 600px;height:600px;"></div>
	<div id="dialog"></div>
	
	<script type="text/javascript"> 
	
		$('#map_canvas').gmap({
			'center' : '58.435646, 11.380046'
		});
		$('#map_canvas').gmap('option', 'zoom', 15);
		$('#map_canvas').gmap().bind('init', function(event, map) { 
			$(map).click( function(event) {
				$('#map_canvas').gmap('addMarker', {
					'position': event.latLng, 
					'draggable': true, 
					'bounds': false
				}, function(map, marker) {
					$('#dialog').append('<form id="dialog'+marker.__gm_id+'" method="get" action="/" style="display:none;"><p><label for="country">Country</label><input id="country'+marker.__gm_id+'" class="txt" name="country" value=""/></p><p><label for="state">State</label><input id="state'+marker.__gm_id+'" class="txt" name="state" value=""/></p><p><label for="address">Address</label><input id="address'+marker.__gm_id+'" class="txt" name="address" value=""/></p><p><label for="comment">Comment</label><textarea id="comment" class="txt" name="comment" cols="40" rows="5"></textarea></p></form>');
					//findLocation(marker.getPosition(), marker);
				}).dragend( function(event) {
					//findLocation(event.latLng, this);
					//alert('Dragend');
				}).click( function() {
					openDialog(this);
					
				})
			});
		});
		
		function openDialog(marker) {
			$('#dialog'+marker.__gm_id).dialog({'modal':true, 'title': 'Edit and save point', 'buttons': { 
				"Remove": function() {
					$(this).dialog( "close" );
					marker.setMap(null);
				},
				"Save": function() {
					$(this).dialog( "close" );
					// Send command to the REST backend.
				}
			}});
		}
		
	</script>

</body>
</html>
